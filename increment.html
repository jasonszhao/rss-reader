<title>Functional Reactive Programming with Flyd</title>
<p>Open this in multiple tabs!</p>

<p>Changes to the first counter are not replicated real-time, 
but changes to the second <strong>are</strong> replicated real-time across browser tabs!</span>

<div> 
    <button onclick="actions(increment_x())">+</button>
    <span id="x">0</span>
    <button onclick="actions(decrement_x())">-</button>
</div>
<div> 
    <button onclick="actions(increment_y())">+</button>
    <span id="y">0</span>
    <button onclick="actions(decrement_y())">-</button>
</div>
<div> 
    Sum: <span id="sum">0</span>
</div>

<script src="https://unpkg.com/immer/dist/immer.umd.js"></script>
<script src="http://cdn.jsdelivr.net/npm/ramda@0.25/dist/ramda.min.js"></script>
<script src="https://cdn.rawgit.com/paldepind/flyd/34f59e12/flyd.min.js"></script>
<script>
// copy-pasted from 
// https://github.com/paldepind/flyd/blob/master/module/forwardto/index.js
const forwardTo = flyd.curryN(2, function(targ, fn) {
    var s = flyd.stream();
    flyd.map(function(v) { targ(fn(v)); }, s);
    return s;
});

// copy-pasted from
// https://github.com/paldepind/flyd/blob/master/module/filter/index.js
const filter = flyd.curryN(2, function(fn, s) {
    return flyd.combine(function(s, self) {
	if (fn(s())) self(s.val);
    }, [s]);
});
</script>
<script src="increment.js"></script>

